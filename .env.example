# ============================================================
# Chrome Extension Backend - Environment Configuration
# ============================================================

# ========== 基础配置 ==========
APP_NAME=ExtensionBackend
SERVICE_MODE=AUTH
# 可选值: AUTH (中间层) | BUSINESS (业务层)

PORT=8081
# AUTH 服务默认 8081, BUSINESS 服务默认 8082

GIN_MODE=release
# 可选值: debug | release | test

# ========== 安全密钥 ==========

# Token 加密密钥 (必须 32 字节, 用于 AES-256-GCM)
SERVER_SECRET=YourSuperLongRandomString32Bytes!!

# 客户端初始盐值计算密钥 (用于动态生成盐值)
CLIENT_SALT_SECRET=AnotherRandomSecretForSaltGen123

# ========== 数据库配置 ==========

SQL_DSN=postgres://postgres:password@localhost:5432/extension_db?sslmode=disable
SQL_MAX_IDLE_CONNS=100
SQL_MAX_OPEN_CONNS=1000
SQL_MAX_LIFETIME=60
# 单位: 秒

# ========== Redis 配置 ==========

REDIS_CONN_STRING=redis://default:password@localhost:6379/0
# 格式: redis://user:pass@host:port/db

REDIS_POOL_SIZE=100
REDIS_MIN_IDLE_CONNS=10

# ========== Token 配置 ==========

TOKEN_TTL_SECONDS=3600
# Token 有效期, 默认 1 小时

TIMESTAMP_TOLERANCE_SECONDS=300
# 时间戳容差, 默认 5 分钟

NONCE_TTL_SECONDS=310
# Nonce 有效期, 略大于时间戳容差

# ========== 速率限制 ==========

LIMIT_GUEST_RPM=10
# 游客每分钟请求数

LIMIT_USER_RPM=20
# 登录用户每分钟请求数

LIMIT_AUTH_RPM=10
# /auth_token 每分钟请求数 (IP 级)

# ========== 扩展白名单 ==========

INIT_ALLOWED_EXTENSION_IDS=abcdefghijklmnopqrstuvwxyz1234,anothertextensionid5678901234
# 逗号分隔的合法扩展 ID 列表
# 初始值, 若 redis 为空则写入redis, 之后从 redis 读取

# ========== 第三方服务 ==========

GOOGLE_CLIENT_ID=731421594606-xxx.apps.googleusercontent.com
# Google OAuth 客户端 ID (如需 Google 登录)

# ========== 日志配置 ==========

LOG_LEVEL=info
# 可选值: debug | info | warn | error

LOG_FORMAT=json
# 可选值: json | text
